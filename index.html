<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <meta name="description" content="TJ Koury - Founder & Chief Architect of DigitalArsenal.io, Inc. Building the Space Data Network â€” open-source infrastructure for space operations.">
  <meta name="keywords" content="Space Data Network, WebGL, WebAssembly, FlatBuffers, Orbital Mechanics, Astrodynamics, P2P, CesiumJS, OrbPro">
  <meta name="author" content="TJ Koury">
  <meta property="og:title" content="TJ Koury | Space Data Network Architect">
  <meta property="og:description" content="10+ years building open-source space data infrastructure. Founder of DigitalArsenal.io.">
  <meta property="og:url" content="https://tjkoury.com">
  <meta property="og:type" content="profile">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="TJ Koury | Space Data Network Architect">
  <meta name="twitter:description" content="10+ years building open-source space data infrastructure.">
  <title>TJ Koury | Founder & Chief Architect | DigitalArsenal.io</title>

  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.171.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.171.0/examples/jsm/"
    }
  }
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/pdfmake.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.10/vfs_fonts.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/docx@9.0.2/build/index.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js" defer></script>

  <style>
    /* ===== RESET ===== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      font-size: 16px;
      line-height: 1.6;
      color: #fff;
      overflow-x: hidden;
      background: linear-gradient(to bottom, #000014, #000428);
    }

    /* ===== CUSTOM PROPERTIES ===== */
    :root {
      --primary: #00d4ff;
      --secondary: #b794f4;
      --accent: #ffd700;
      --glass: rgba(255, 255, 255, 0.08);
      --glass-border: rgba(255, 255, 255, 0.15);
      --text-muted: #a0aec0;
      --gap: 1.5rem;
      --radius: 16px;
      --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    /* ===== CANVAS ===== */
    #webgl-canvas {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    /* ===== SKIP LINK ===== */
    .skip-link {
      position: absolute;
      top: -50px;
      left: 0;
      background: var(--primary);
      color: #000;
      padding: 0.5rem 1rem;
      text-decoration: none;
      z-index: 1000;
      border-radius: 0 0 8px 0;
      font-weight: 600;
    }
    .skip-link:focus { top: 0; }

    /* ===== CONTENT OVERLAY ===== */
    .content-overlay {
      position: relative;
      z-index: 1;
      max-width: 960px;
      margin: 0 auto;
      padding: 2rem 1.5rem 6rem;
    }

    /* ===== GLASS PANELS ===== */
    .glass {
      background: var(--glass);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem;
      margin-bottom: var(--gap);
    }

    /* ===== HEADER ===== */
    .resume-header { text-align: center; padding: 3rem 2rem; }

    .resume-header h1 {
      font-size: clamp(2.2rem, 6vw, 4rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.25rem;
    }

    .resume-header .title {
      font-size: clamp(1rem, 2.5vw, 1.4rem);
      color: var(--text-muted);
      font-weight: 400;
    }

    .resume-header .company {
      font-size: clamp(1.1rem, 3vw, 1.6rem);
      font-weight: 600;
      color: var(--primary);
      margin: 0.25rem 0 1rem;
    }

    .resume-header .contact-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .resume-header .contact-links a {
      color: var(--primary);
      text-decoration: none;
      font-size: 0.95rem;
      border-bottom: 1px dashed rgba(0, 212, 255, 0.4);
      transition: color 0.2s, border-color 0.2s;
    }
    .resume-header .contact-links a:hover {
      color: var(--accent);
      border-color: var(--accent);
    }

    /* ===== SECTION HEADINGS ===== */
    .resume-section h2 {
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      color: var(--primary);
      margin-bottom: 1.25rem;
      padding-bottom: 0.6rem;
      border-bottom: 2px solid var(--secondary);
    }

    /* ===== SKILLS GRID ===== */
    .skills-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1.25rem;
    }

    .skill-category h3 {
      color: var(--accent);
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .skill-category p {
      color: var(--text-muted);
      font-size: 0.9rem;
      line-height: 1.5;
    }

    /* ===== PROJECT / PRODUCT / ACHIEVEMENT LISTS ===== */
    .item-list {
      list-style: none;
      padding: 0;
    }

    .item-list li {
      margin-bottom: 1.25rem;
      padding-left: 1.2rem;
      position: relative;
    }

    .item-list li::before {
      content: '\25B8';
      position: absolute;
      left: 0;
      color: var(--primary);
      font-size: 1rem;
      line-height: 1.6;
    }

    .item-list .item-name {
      font-weight: 700;
      color: #fff;
    }

    .item-list .item-desc {
      color: var(--text-muted);
      font-size: 0.92rem;
    }

    .item-list a {
      color: var(--primary);
      text-decoration: none;
      font-size: 0.85rem;
      border-bottom: 1px dashed rgba(0, 212, 255, 0.3);
      transition: color 0.2s, border-color 0.2s;
    }
    .item-list a:hover {
      color: var(--accent);
      border-color: var(--accent);
    }

    .achievement-list li {
      margin-bottom: 0.75rem;
      font-size: 0.92rem;
      color: var(--text-muted);
    }

    /* ===== GITHUB PAGES LINKS ===== */
    .pages-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 1rem;
    }

    .page-card {
      display: block;
      background: rgba(0, 212, 255, 0.06);
      border: 1px solid rgba(0, 212, 255, 0.2);
      border-radius: 12px;
      padding: 1.25rem;
      text-decoration: none;
      transition: transform 0.2s, border-color 0.2s, box-shadow 0.2s;
    }
    .page-card:hover {
      transform: translateY(-3px);
      border-color: var(--primary);
      box-shadow: 0 6px 24px rgba(0, 212, 255, 0.15);
    }

    .page-card .card-title {
      color: var(--primary);
      font-weight: 700;
      font-size: 1rem;
      margin-bottom: 0.3rem;
    }

    .page-card .card-desc {
      color: var(--text-muted);
      font-size: 0.85rem;
      line-height: 1.4;
    }

    .page-card .card-url {
      display: block;
      margin-top: 0.5rem;
      color: rgba(0, 212, 255, 0.6);
      font-size: 0.78rem;
      font-family: 'SF Mono', 'Fira Code', monospace;
    }

    /* ===== DOWNLOAD BAR ===== */
    .download-bar {
      position: fixed;
      bottom: 1.25rem;
      right: 1.25rem;
      display: flex;
      gap: 0.6rem;
      z-index: 100;
    }

    .download-btn {
      background: rgba(10, 10, 40, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--primary);
      border-radius: 10px;
      color: #fff;
      padding: 0.65rem 1.1rem;
      font-size: 0.85rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      box-shadow: 0 4px 15px rgba(0, 212, 255, 0.2);
      font-family: inherit;
    }

    .download-btn:hover {
      background: var(--primary);
      color: #000;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 212, 255, 0.4);
    }

    .download-btn:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .download-btn:active {
      transform: translateY(0);
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 768px) {
      .content-overlay { padding: 1rem 1rem 7rem; }
      .glass { padding: 1.5rem; }
      .resume-header { padding: 2rem 1.5rem; }
      .skills-grid { grid-template-columns: 1fr 1fr; }
      .pages-grid { grid-template-columns: 1fr; }
      .download-bar {
        bottom: 0.75rem;
        right: 0.75rem;
        left: 0.75rem;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      .skills-grid { grid-template-columns: 1fr; }
      .download-btn { padding: 0.5rem 0.8rem; font-size: 0.8rem; }
    }

    /* ===== PRINT ===== */
    @media print {
      #webgl-canvas, .download-bar, .skip-link { display: none !important; }
      body { background: #fff; color: #000; }
      .content-overlay { padding: 0; }
      .glass {
        background: #fff;
        backdrop-filter: none;
        border: 1px solid #ddd;
        box-shadow: none;
        color: #000;
        break-inside: avoid;
      }
      .resume-header h1 {
        -webkit-text-fill-color: #1a202c;
        color: #1a202c;
      }
      .resume-section h2 { color: #2d3748; border-color: #cbd5e0; }
      .skill-category h3 { color: #4a5568; }
      .skill-category p, .item-list .item-desc, .achievement-list li { color: #4a5568; }
      .item-list a, .page-card .card-title, .resume-header .company { color: #2b6cb0; }
    }

    /* ===== REDUCED MOTION ===== */
    @media (prefers-reduced-motion: reduce) {
      #webgl-canvas { display: none; }
    }

    /* ===== SCROLL FADE-IN ===== */
    .resume-section, .resume-header {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .resume-section.visible, .resume-header.visible {
      opacity: 1;
      transform: translateY(0);
    }
    @media (prefers-reduced-motion: reduce) {
      .resume-section, .resume-header {
        opacity: 1;
        transform: none;
        transition: none;
      }
    }
  </style>
</head>
<body>
  <canvas id="webgl-canvas" role="presentation" aria-hidden="true"></canvas>

  <a href="#main-content" class="skip-link">Skip to main content</a>

  <main id="main-content" class="content-overlay">
    <header class="resume-header glass">
      <h1>TJ Koury</h1>
      <p class="title">Founder &amp; Chief Architect</p>
      <p class="company">DigitalArsenal.io, Inc.</p>
      <nav class="contact-links" aria-label="Contact and social links">
        <a href="https://digitalarsenal.io" target="_blank" rel="noopener">digitalarsenal.io</a>
        <a href="https://github.com/DigitalArsenal" target="_blank" rel="noopener">GitHub</a>
      </nav>
    </header>

    <section class="resume-section glass" id="summary">
      <h2>Summary</h2>
      <p id="summary-text"></p>
    </section>

    <section class="resume-section glass" id="skills">
      <h2>Technical Skills</h2>
      <div class="skills-grid" id="skills-grid"></div>
    </section>

    <section class="resume-section glass" id="pages">
      <h2>Documentation Sites</h2>
      <div class="pages-grid" id="pages-grid"></div>
    </section>

    <section class="resume-section glass" id="projects">
      <h2>Open Source Projects</h2>
      <ul class="item-list" id="project-list"></ul>
    </section>

    <section class="resume-section glass" id="commercial">
      <h2>Commercial Products</h2>
      <ul class="item-list" id="product-list"></ul>
    </section>

    <section class="resume-section glass" id="achievements">
      <h2>Key Achievements</h2>
      <ul class="item-list achievement-list" id="achievement-list"></ul>
    </section>
  </main>

  <aside class="download-bar" role="complementary" aria-label="Download resume">
    <button class="download-btn" id="dl-pdf" aria-label="Download resume as PDF">PDF</button>
    <button class="download-btn" id="dl-docx" aria-label="Download resume as Word document">DOCX</button>
    <button class="download-btn" id="dl-txt" aria-label="Download resume as plain text">TXT</button>
  </aside>

  <script type="module">
    // =========================================================================
    // RESUME DATA
    // =========================================================================
    const RESUME = {
      name: 'TJ Koury',
      title: 'Founder & Chief Architect',
      company: 'DigitalArsenal.io, Inc.',
      website: 'https://digitalarsenal.io',
      github: 'https://github.com/DigitalArsenal',
      qrUrl: 'https://tjkoury.com',

      summary: 'Founder and Chief Architect with over 10 years of R\u0026D building open-source space data infrastructure. Architect of the Space Data Network \u2014 a decentralized peer-to-peer protocol for exchanging standardized space data. Creator of the industry\u2019s first WebAssembly-powered astrodynamics simulation frameworks, enabling browser-based orbital mechanics, conjunction assessment, and spacecraft simulation without vendor lock-in or six-figure license fees.',

      skills: [
        { category: 'Languages', items: 'Go, TypeScript, C++, Rust, Python, JavaScript' },
        { category: 'Web Technologies', items: 'WebGL, WebGPU, WebAssembly (WASM), Three.js, CesiumJS, Svelte' },
        { category: 'Data & Serialization', items: 'FlatBuffers, SQLite, FlatSQL, IPFS, IndexedDB' },
        { category: 'Networking & P2P', items: 'libp2p, GossipSub, Kademlia DHT, WebTransport, Circuit Relay' },
        { category: 'Cryptography', items: 'Ed25519, ECIES, X25519, BIP-32/39/44, FIPS 140-3, Microsoft SEAL' },
        { category: 'Astrodynamics', items: 'Orbital Mechanics, SGP4/SGP4-XP, Conjunction Assessment, Tudat, Basilisk' }
      ],

      githubPages: [
        {
          title: 'FlatBuffers WASM',
          desc: 'WebAssembly FlatBuffers compiler with 13-language code generation and encryption support.',
          url: 'https://digitalarsenal.github.io/flatbuffers'
        },
        {
          title: 'FlatSQL',
          desc: 'SQL query engine over FlatBuffers via SQLite virtual tables. 580K ops/sec.',
          url: 'https://digitalarsenal.github.io/flatsql'
        },
        {
          title: 'Space Data Network',
          desc: 'Decentralized P2P protocol for space data exchange with real-time streaming and marketplace.',
          url: 'https://digitalarsenal.github.io/space-data-network'
        },
        {
          title: 'HD Wallet WASM',
          desc: 'BIP-32/39/44 hierarchical deterministic wallets in WebAssembly. 50+ blockchain networks.',
          url: 'https://digitalarsenal.github.io/hd-wallet-wasm'
        }
      ],

      projects: [
        {
          name: 'Space Data Network',
          desc: 'Decentralized P2P protocol for exchanging standardized space data. Built on libp2p with GossipSub pub/sub, Kademlia DHT, content-addressed storage, real-time streaming, and a built-in data marketplace.',
          url: 'https://github.com/DigitalArsenal/space-data-network'
        },
        {
          name: 'FlatBuffers WASM',
          desc: 'WebAssembly port of Google\u2019s FlatBuffers compiler (flatc), enabling 13-language code generation directly in the browser. Zero-copy serialization at 250M ops/sec on Apple Silicon.',
          url: 'https://github.com/DigitalArsenal/flatbuffers'
        },
        {
          name: 'FlatSQL',
          desc: 'SQL query engine over FlatBuffers binary data. Implements SQLite virtual tables for content-addressed FlatBuffer storage with full indexing and 580K ops/sec throughput.',
          url: 'https://github.com/DigitalArsenal/flatsql'
        },
        {
          name: 'HD Wallet WASM',
          desc: 'BIP-32/39/44 hierarchical deterministic wallet implementation in WebAssembly. Supports 50+ blockchain networks with Ed25519, secp256k1, and secp256r1 signing. FIPS 140-3 compliant.',
          url: 'https://github.com/DigitalArsenal/hd-wallet-wasm'
        },
        {
          name: 'Space Data Standards',
          desc: '127 FlatBuffer schemas covering every domain of space operations: orbital data (OMM, OEM, OCM), conjunction assessment (CDM), tracking (TDM), catalog, marketplace, and entity identity.',
          url: 'https://github.com/DigitalArsenal/spacedatastandards.org'
        },
        {
          name: 'Tudat-WASM',
          desc: 'First WebAssembly port of TU Delft\u2019s Tudat astrodynamics library. High-fidelity orbital propagation, mission design, and trajectory optimization running entirely in the browser.',
          url: 'https://github.com/DigitalArsenal/tudat-wasm'
        },
        {
          name: 'Basilisk-WASM',
          desc: 'WebAssembly port of the Basilisk spacecraft simulation framework. 310+ C++ classes, 1,757 tests, covering attitude dynamics, power systems, and hardware-in-the-loop testing.',
          url: 'https://github.com/DigitalArsenal/basilisk'
        }
      ],

      products: [
        {
          name: 'OrbPro',
          desc: 'CesiumJS-based orbital visualization engine with real-time 3D rendering, sensor field-of-view modeling, viewshed analysis, access analysis, and conjunction visualization. Powers the SpaceAware.io platform.',
          url: 'https://digitalarsenal.io'
        },
        {
          name: 'SpaceAware.io',
          desc: 'SaaS platform for space situational awareness. AI-powered natural language globe control via MCP, modeling & simulation with 608 entity types, real-time data streaming, and tiered pricing from Free to $40/seat/month.',
          url: 'https://spaceaware.io'
        }
      ],

      achievements: [
        'Designed and implemented 127 standardized space data schemas (Space Data Standards) for the entire space operations domain',
        'Achieved zero-copy deserialization at 250M operations/sec using FlatBuffers on Apple Silicon',
        'Created the first browser-based WebAssembly astrodynamics simulation (Tudat-WASM), eliminating six-figure software licensing barriers',
        'Built a decentralized P2P space data network supporting 10GB+ sustained streaming throughput with content-addressed deduplication',
        'Published 100,000+ lines of open-source code across 13+ repositories in the DigitalArsenal GitHub organization',
        'Implemented homomorphic encryption for conjunction assessment using Microsoft SEAL, enabling encrypted orbit comparison without revealing positions',
        'Architected a data marketplace with ECIES encryption, Stripe payment integration, and trust-based reputation scoring'
      ]
    };

    // =========================================================================
    // DOM RENDERING
    // =========================================================================
    function renderResume() {
      document.getElementById('summary-text').textContent = RESUME.summary;

      const grid = document.getElementById('skills-grid');
      RESUME.skills.forEach(s => {
        const div = document.createElement('div');
        div.className = 'skill-category';
        const h3 = document.createElement('h3');
        h3.textContent = s.category;
        const p = document.createElement('p');
        p.textContent = s.items;
        div.appendChild(h3);
        div.appendChild(p);
        grid.appendChild(div);
      });

      const pagesGrid = document.getElementById('pages-grid');
      RESUME.githubPages.forEach(p => {
        const a = document.createElement('a');
        a.className = 'page-card';
        a.href = p.url;
        a.target = '_blank';
        a.rel = 'noopener';
        const t = document.createElement('div');
        t.className = 'card-title';
        t.textContent = p.title;
        const d = document.createElement('div');
        d.className = 'card-desc';
        d.textContent = p.desc;
        const u = document.createElement('span');
        u.className = 'card-url';
        u.textContent = p.url.replace('https://', '');
        a.appendChild(t);
        a.appendChild(d);
        a.appendChild(u);
        pagesGrid.appendChild(a);
      });

      const pList = document.getElementById('project-list');
      RESUME.projects.forEach(p => {
        const li = document.createElement('li');
        const name = document.createElement('span');
        name.className = 'item-name';
        name.textContent = p.name;
        const desc = document.createElement('span');
        desc.className = 'item-desc';
        desc.textContent = ' \u2014 ' + p.desc;
        li.appendChild(name);
        li.appendChild(desc);
        if (p.url) {
          li.appendChild(document.createElement('br'));
          const link = document.createElement('a');
          link.href = p.url;
          link.target = '_blank';
          link.rel = 'noopener';
          link.textContent = p.url.replace('https://github.com/', '');
          li.appendChild(link);
        }
        pList.appendChild(li);
      });

      const prodList = document.getElementById('product-list');
      RESUME.products.forEach(p => {
        const li = document.createElement('li');
        const name = document.createElement('span');
        name.className = 'item-name';
        name.textContent = p.name;
        const desc = document.createElement('span');
        desc.className = 'item-desc';
        desc.textContent = ' \u2014 ' + p.desc;
        li.appendChild(name);
        li.appendChild(desc);
        if (p.url) {
          li.appendChild(document.createElement('br'));
          const link = document.createElement('a');
          link.href = p.url;
          link.target = '_blank';
          link.rel = 'noopener';
          link.textContent = p.url.replace('https://', '');
          li.appendChild(link);
        }
        prodList.appendChild(li);
      });

      const achList = document.getElementById('achievement-list');
      RESUME.achievements.forEach(a => {
        const li = document.createElement('li');
        li.textContent = a;
        achList.appendChild(li);
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            e.target.classList.add('visible');
            observer.unobserve(e.target);
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.resume-section, .resume-header').forEach(el => observer.observe(el));
    }

    // =========================================================================
    // PDF GENERATION (pdfmake)
    // =========================================================================
    function generatePDF() {
      const dd = {
        pageSize: 'LETTER',
        pageMargins: [50, 50, 50, 50],
        header: function(currentPage) {
          if (currentPage === 1) {
            return {
              columns: [
                { text: '', width: '*' },
                { qr: RESUME.qrUrl, fit: 70, margin: [0, 15, 30, 0], foreground: '#1a202c' }
              ]
            };
          }
          return null;
        },
        footer: function(currentPage, pageCount) {
          return {
            columns: [
              { text: 'tjkoury.com', color: '#2b6cb0', fontSize: 8, margin: [50, 0, 0, 0], link: RESUME.qrUrl },
              { text: currentPage + ' / ' + pageCount, alignment: 'right', fontSize: 8, color: '#999', margin: [0, 0, 50, 0] }
            ]
          };
        },
        content: [
          { text: RESUME.name, fontSize: 26, bold: true, color: '#1a202c', margin: [0, 0, 0, 4] },
          { text: RESUME.title + '  |  ' + RESUME.company, fontSize: 13, color: '#4a5568', margin: [0, 0, 0, 2] },
          { text: RESUME.website.replace('https://', ''), link: RESUME.website, color: '#2b6cb0', fontSize: 10, margin: [0, 0, 0, 18] },

          { text: 'SUMMARY', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 0, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          { text: RESUME.summary, fontSize: 10, lineHeight: 1.4, margin: [0, 0, 0, 14] },

          { text: 'TECHNICAL SKILLS', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 0, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          {
            ul: RESUME.skills.map(function(s) {
              return {
                text: [{ text: s.category + ': ', bold: true, fontSize: 10 }, { text: s.items, fontSize: 10 }],
                margin: [0, 1, 0, 1]
              };
            }),
            margin: [0, 0, 0, 14]
          },

          { text: 'OPEN SOURCE PROJECTS', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 0, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          ...RESUME.projects.map(function(p) {
            var stack = [
              { text: p.name, fontSize: 11, bold: true, color: '#2d3748', margin: [0, 4, 0, 2] },
              { text: p.desc, fontSize: 9.5, lineHeight: 1.3, color: '#4a5568', margin: [0, 0, 0, 1] }
            ];
            if (p.url) stack.push({ text: p.url, link: p.url, color: '#2b6cb0', fontSize: 8.5, margin: [0, 0, 0, 4] });
            return { stack: stack };
          }),

          { text: 'COMMERCIAL PRODUCTS', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 14, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          ...RESUME.products.map(function(p) {
            var stack = [
              { text: p.name, fontSize: 11, bold: true, color: '#2d3748', margin: [0, 4, 0, 2] },
              { text: p.desc, fontSize: 9.5, lineHeight: 1.3, color: '#4a5568', margin: [0, 0, 0, 1] }
            ];
            if (p.url) stack.push({ text: p.url, link: p.url, color: '#2b6cb0', fontSize: 8.5, margin: [0, 0, 0, 4] });
            return { stack: stack };
          }),

          { text: 'KEY ACHIEVEMENTS', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 14, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          { ul: RESUME.achievements.map(function(a) { return { text: a, fontSize: 9.5, lineHeight: 1.3, color: '#4a5568', margin: [0, 1, 0, 3] }; }) },

          { text: 'DOCUMENTATION SITES', fontSize: 14, bold: true, color: '#2d3748', margin: [0, 14, 0, 6] },
          { canvas: [{ type: 'line', x1: 0, y1: 0, x2: 515, y2: 0, lineWidth: 1, lineColor: '#cbd5e0' }], margin: [0, 0, 0, 8] },
          ...RESUME.githubPages.map(function(p) {
            return {
              text: [
                { text: p.title + ': ', bold: true, fontSize: 10 },
                { text: p.url, link: p.url, color: '#2b6cb0', fontSize: 10 }
              ],
              margin: [0, 2, 0, 2]
            };
          })
        ],
        defaultStyle: { fontSize: 10, color: '#1a202c' }
      };

      pdfMake.createPdf(dd).download('TJ_Koury_Resume.pdf');
    }

    // =========================================================================
    // DOCX GENERATION (docx.js)
    // =========================================================================
    async function generateDOCX() {
      var D = window.docx;
      var Document = D.Document, Paragraph = D.Paragraph, TextRun = D.TextRun,
          AlignmentType = D.AlignmentType, ExternalHyperlink = D.ExternalHyperlink,
          ImageRun = D.ImageRun, BorderStyle = D.BorderStyle;

      var qr = qrcode(0, 'M');
      qr.addData(RESUME.qrUrl);
      qr.make();
      var dataUrl = qr.createDataURL(4, 0);
      var base64 = dataUrl.split(',')[1];
      var raw = atob(base64);
      var bytes = new Uint8Array(raw.length);
      for (var i = 0; i < raw.length; i++) bytes[i] = raw.charCodeAt(i);

      function sectionLine() {
        return new Paragraph({
          border: { bottom: { style: BorderStyle.SINGLE, size: 6, color: 'CCCCCC' } },
          spacing: { after: 200 }
        });
      }

      var children = [
        new Paragraph({
          children: [new ImageRun({ data: bytes, transformation: { width: 80, height: 80 }, type: 'png' })],
          alignment: AlignmentType.RIGHT
        }),
        new Paragraph({
          children: [new TextRun({ text: RESUME.name, bold: true, size: 52, font: 'Calibri' })],
          spacing: { after: 80 }
        }),
        new Paragraph({
          children: [new TextRun({ text: RESUME.title + '  |  ' + RESUME.company, size: 24, color: '4A5568', font: 'Calibri' })],
          spacing: { after: 60 }
        }),
        new Paragraph({
          children: [new ExternalHyperlink({ children: [new TextRun({ text: RESUME.website.replace('https://', ''), style: 'Hyperlink', size: 20 })], link: RESUME.website })],
          spacing: { after: 300 }
        }),

        new Paragraph({ children: [new TextRun({ text: 'SUMMARY', bold: true, size: 28, font: 'Calibri' })], spacing: { after: 100 } }),
        sectionLine(),
        new Paragraph({ children: [new TextRun({ text: RESUME.summary, size: 20, font: 'Calibri' })], spacing: { after: 300 } }),

        new Paragraph({ children: [new TextRun({ text: 'TECHNICAL SKILLS', bold: true, size: 28, font: 'Calibri' })], spacing: { after: 100 } }),
        sectionLine()
      ];

      RESUME.skills.forEach(function(s) {
        children.push(new Paragraph({
          children: [
            new TextRun({ text: s.category + ': ', bold: true, size: 20, font: 'Calibri' }),
            new TextRun({ text: s.items, size: 20, font: 'Calibri' })
          ],
          spacing: { after: 80 }
        }));
      });

      children.push(new Paragraph({ children: [new TextRun({ text: 'OPEN SOURCE PROJECTS', bold: true, size: 28, font: 'Calibri' })], spacing: { before: 300, after: 100 }, pageBreakBefore: true }));
      children.push(sectionLine());

      RESUME.projects.forEach(function(p) {
        children.push(new Paragraph({ children: [new TextRun({ text: p.name, bold: true, size: 22, font: 'Calibri' })], spacing: { before: 120, after: 60 } }));
        children.push(new Paragraph({ children: [new TextRun({ text: p.desc, size: 19, font: 'Calibri', color: '4A5568' })], spacing: { after: 40 } }));
        if (p.url) {
          children.push(new Paragraph({
            children: [new ExternalHyperlink({ children: [new TextRun({ text: p.url, style: 'Hyperlink', size: 18 })], link: p.url })],
            spacing: { after: 120 }
          }));
        }
      });

      children.push(new Paragraph({ children: [new TextRun({ text: 'COMMERCIAL PRODUCTS', bold: true, size: 28, font: 'Calibri' })], spacing: { before: 300, after: 100 } }));
      children.push(sectionLine());

      RESUME.products.forEach(function(p) {
        children.push(new Paragraph({ children: [new TextRun({ text: p.name, bold: true, size: 22, font: 'Calibri' })], spacing: { before: 120, after: 60 } }));
        children.push(new Paragraph({ children: [new TextRun({ text: p.desc, size: 19, font: 'Calibri', color: '4A5568' })], spacing: { after: 40 } }));
        if (p.url) {
          children.push(new Paragraph({
            children: [new ExternalHyperlink({ children: [new TextRun({ text: p.url, style: 'Hyperlink', size: 18 })], link: p.url })],
            spacing: { after: 120 }
          }));
        }
      });

      children.push(new Paragraph({ children: [new TextRun({ text: 'KEY ACHIEVEMENTS', bold: true, size: 28, font: 'Calibri' })], spacing: { before: 300, after: 100 } }));
      children.push(sectionLine());

      RESUME.achievements.forEach(function(a) {
        children.push(new Paragraph({
          children: [new TextRun({ text: a, size: 19, font: 'Calibri', color: '4A5568' })],
          bullet: { level: 0 },
          spacing: { after: 80 }
        }));
      });

      children.push(new Paragraph({ children: [new TextRun({ text: 'DOCUMENTATION SITES', bold: true, size: 28, font: 'Calibri' })], spacing: { before: 300, after: 100 } }));
      children.push(sectionLine());

      RESUME.githubPages.forEach(function(p) {
        children.push(new Paragraph({
          children: [
            new TextRun({ text: p.title + ': ', bold: true, size: 20, font: 'Calibri' }),
            new ExternalHyperlink({ children: [new TextRun({ text: p.url, style: 'Hyperlink', size: 20 })], link: p.url })
          ],
          spacing: { after: 80 }
        }));
      });

      var doc = new Document({
        sections: [{
          properties: { page: { margin: { top: 720, right: 720, bottom: 720, left: 720 } } },
          children: children
        }]
      });

      var blob = await D.Packer.toBlob(doc);
      var url = URL.createObjectURL(blob);
      var link = document.createElement('a');
      link.href = url;
      link.download = 'TJ_Koury_Resume.docx';
      link.click();
      URL.revokeObjectURL(url);
    }

    // =========================================================================
    // TEXT GENERATION
    // =========================================================================
    function generateText() {
      var qr = qrcode(0, 'M');
      qr.addData(RESUME.qrUrl);
      qr.make();
      var mc = qr.getModuleCount();
      var asciiQR = '';
      for (var r = 0; r < mc; r++) {
        for (var c = 0; c < mc; c++) asciiQR += qr.isDark(r, c) ? '\u2588\u2588' : '  ';
        asciiQR += '\n';
      }

      var line = '='.repeat(78);
      var thin = '-'.repeat(78);
      var txt = line + '\n' +
        RESUME.name.toUpperCase() + '\n' +
        RESUME.title + '  |  ' + RESUME.company + '\n' +
        RESUME.website + '\n' +
        line + '\n\n' +
        'Scan QR code or visit ' + RESUME.qrUrl + '\n\n' +
        asciiQR + '\n' +
        'SUMMARY\n' + thin + '\n' +
        RESUME.summary + '\n\n' +
        'TECHNICAL SKILLS\n' + thin + '\n' +
        RESUME.skills.map(function(s) { return '  ' + s.category + ': ' + s.items; }).join('\n') + '\n\n' +
        'OPEN SOURCE PROJECTS\n' + thin + '\n' +
        RESUME.projects.map(function(p) { return '  ' + p.name + '\n  ' + p.desc + '\n  ' + (p.url || '') + '\n'; }).join('\n') + '\n' +
        'COMMERCIAL PRODUCTS\n' + thin + '\n' +
        RESUME.products.map(function(p) { return '  ' + p.name + '\n  ' + p.desc + '\n  ' + (p.url || '') + '\n'; }).join('\n') + '\n' +
        'KEY ACHIEVEMENTS\n' + thin + '\n' +
        RESUME.achievements.map(function(a, i) { return '  ' + (i + 1) + '. ' + a; }).join('\n\n') + '\n\n' +
        'DOCUMENTATION SITES\n' + thin + '\n' +
        RESUME.githubPages.map(function(p) { return '  ' + p.title + ': ' + p.url; }).join('\n') + '\n\n' +
        line + '\n' +
        'Generated ' + new Date().toLocaleDateString() + '\n' +
        'Interactive version: ' + RESUME.qrUrl + '\n' +
        line;

      var blob = new Blob([txt], { type: 'text/plain;charset=utf-8' });
      var url = URL.createObjectURL(blob);
      var a = document.createElement('a');
      a.href = url;
      a.download = 'TJ_Koury_Resume.txt';
      a.click();
      URL.revokeObjectURL(url);
    }

    // =========================================================================
    // THREE.JS WEBGL / WEBGPU SCENE
    // =========================================================================
    import * as THREE from 'three';

    var renderer, scene, camera, starfield, satGroup, linesMesh;
    var satOrbits = [];
    var frameCount = 0;

    function getParticleCounts() {
      var w = window.innerWidth;
      var mobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
      if (w < 768 || mobile) return { stars: 4000, sats: 80 };
      if (w < 1200) return { stars: 10000, sats: 140 };
      return { stars: 15000, sats: 200 };
    }

    async function initScene() {
      var canvas = document.getElementById('webgl-canvas');
      scene = new THREE.Scene();
      scene.fog = new THREE.FogExp2(0x000014, 0.00012);

      camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 8000);
      camera.position.set(0, 0, 1400);

      var useWebGPU = false;
      try {
        var WebGPUMod = await import('three/addons/capabilities/WebGPU.js');
        var WebGPU = WebGPUMod.default;
        if (WebGPU.isAvailable()) {
          var RendererMod = await import('three/addons/renderers/webgpu/WebGPURenderer.js');
          var WebGPURenderer = RendererMod.default;
          renderer = new WebGPURenderer({ canvas: canvas, antialias: true, alpha: true });
          await renderer.init();
          useWebGPU = true;
        }
      } catch (e) { /* fallback */ }

      if (!useWebGPU) {
        renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true, alpha: true });
      }

      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

      createStarfield();
      createSatellites();
      createGlow();

      animate();
      window.addEventListener('resize', onResize);
    }

    function createStarfield() {
      var count = getParticleCounts().stars;
      var pos = new Float32Array(count * 3);
      var col = new Float32Array(count * 3);

      for (var i = 0; i < count; i++) {
        var i3 = i * 3;
        var r = 3000 + Math.random() * 3000;
        var theta = Math.random() * Math.PI * 2;
        var phi = Math.acos(2 * Math.random() - 1);
        pos[i3] = r * Math.sin(phi) * Math.cos(theta);
        pos[i3 + 1] = r * Math.sin(phi) * Math.sin(theta);
        pos[i3 + 2] = r * Math.cos(phi);

        var c = 0.7 + Math.random() * 0.3;
        col[i3] = c;
        col[i3 + 1] = c;
        col[i3 + 2] = 1.0;
      }

      var geo = new THREE.BufferGeometry();
      geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
      geo.setAttribute('color', new THREE.BufferAttribute(col, 3));

      var mat = new THREE.PointsMaterial({
        size: 2,
        sizeAttenuation: true,
        vertexColors: true,
        transparent: true,
        opacity: 0.85,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });

      starfield = new THREE.Points(geo, mat);
      scene.add(starfield);
    }

    function createSatellites() {
      var count = getParticleCounts().sats;
      var pos = new Float32Array(count * 3);
      var col = new Float32Array(count * 3);

      for (var i = 0; i < count; i++) {
        var i3 = i * 3;
        var orbitR = 250 + Math.random() * 700;
        var angle = Math.random() * Math.PI * 2;
        var elev = (Math.random() - 0.5) * 300;
        var tilt = (Math.random() - 0.5) * 0.6;

        satOrbits.push({
          radius: orbitR,
          speed: (0.0002 + Math.random() * 0.0006) * (Math.random() > 0.5 ? 1 : -1),
          angle: angle,
          elevation: elev,
          tilt: tilt
        });

        pos[i3] = orbitR * Math.cos(angle);
        pos[i3 + 1] = elev;
        pos[i3 + 2] = orbitR * Math.sin(angle);

        var isCyan = Math.random() > 0.3;
        col[i3] = isCyan ? 0 : 0.72;
        col[i3 + 1] = isCyan ? 0.83 : 0.58;
        col[i3 + 2] = 1.0;
      }

      var geo = new THREE.BufferGeometry();
      geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
      geo.setAttribute('color', new THREE.BufferAttribute(col, 3));

      var mat = new THREE.PointsMaterial({
        size: 3.5,
        sizeAttenuation: true,
        vertexColors: true,
        transparent: true,
        opacity: 0.9,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });

      satGroup = new THREE.Points(geo, mat);
      scene.add(satGroup);

      var lineMat = new THREE.LineBasicMaterial({
        color: 0x00d4ff,
        transparent: true,
        opacity: 0.12,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });
      var lineGeo = new THREE.BufferGeometry();
      linesMesh = new THREE.LineSegments(lineGeo, lineMat);
      scene.add(linesMesh);
    }

    function updateLines() {
      var pos = satGroup.geometry.attributes.position.array;
      var n = satOrbits.length;
      var maxDistSq = 160 * 160;
      var lineVerts = [];

      for (var i = 0; i < n; i++) {
        var ix = i * 3, iy = ix + 1, iz = ix + 2;
        var end = Math.min(i + 12, n);
        for (var j = i + 1; j < end; j++) {
          var jx = j * 3, jy = jx + 1, jz = jx + 2;
          var dx = pos[ix] - pos[jx];
          var dy = pos[iy] - pos[jy];
          var dz = pos[iz] - pos[jz];
          if (dx * dx + dy * dy + dz * dz < maxDistSq) {
            lineVerts.push(pos[ix], pos[iy], pos[iz], pos[jx], pos[jy], pos[jz]);
          }
        }
      }

      linesMesh.geometry.dispose();
      var geo = new THREE.BufferGeometry();
      if (lineVerts.length > 0) {
        geo.setAttribute('position', new THREE.Float32BufferAttribute(lineVerts, 3));
      }
      linesMesh.geometry = geo;
    }

    function createGlow() {
      var glowGeo = new THREE.SphereGeometry(40, 32, 32);
      var glowMat = new THREE.MeshBasicMaterial({
        color: 0x00aaff,
        transparent: true,
        opacity: 0.15,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });
      scene.add(new THREE.Mesh(glowGeo, glowMat));

      var haloGeo = new THREE.SphereGeometry(80, 32, 32);
      var haloMat = new THREE.MeshBasicMaterial({
        color: 0x0066cc,
        transparent: true,
        opacity: 0.06,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });
      scene.add(new THREE.Mesh(haloGeo, haloMat));

      var ringGeo = new THREE.RingGeometry(90, 130, 64);
      var ringMat = new THREE.MeshBasicMaterial({
        color: 0xb794f4,
        transparent: true,
        opacity: 0.08,
        side: THREE.DoubleSide,
        blending: THREE.AdditiveBlending,
        depthWrite: false
      });
      var ring = new THREE.Mesh(ringGeo, ringMat);
      ring.rotation.x = Math.PI * 0.5;
      scene.add(ring);
    }

    function animate() {
      requestAnimationFrame(animate);
      frameCount++;

      if (starfield) starfield.rotation.y += 0.00004;

      if (satGroup) {
        var pos = satGroup.geometry.attributes.position.array;
        for (var i = 0; i < satOrbits.length; i++) {
          var o = satOrbits[i];
          o.angle += o.speed;
          var i3 = i * 3;
          pos[i3] = o.radius * Math.cos(o.angle);
          pos[i3 + 1] = o.elevation + Math.sin(o.angle * 2 + o.tilt) * 15;
          pos[i3 + 2] = o.radius * Math.sin(o.angle);
        }
        satGroup.geometry.attributes.position.needsUpdate = true;

        if (frameCount % 6 === 0) updateLines();
      }

      var t = Date.now() * 0.00004;
      camera.position.x = Math.sin(t) * 60;
      camera.position.y = Math.cos(t * 0.7) * 40;
      camera.lookAt(0, 0, 0);

      renderer.render(scene, camera);
    }

    function onResize() {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    }

    // =========================================================================
    // BOOTSTRAP
    // =========================================================================
    renderResume();

    document.getElementById('dl-pdf').addEventListener('click', generatePDF);
    document.getElementById('dl-docx').addEventListener('click', generateDOCX);
    document.getElementById('dl-txt').addEventListener('click', generateText);

    if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      initScene().catch(function(err) { console.warn('WebGL init failed:', err); });
    }
  </script>
</body>
</html>
